% Test to check if \setupformulas[align=left|right] works correctly with
% \startalign etc.

\starttext

\startbuffer
\placeformula\startformula
  a_1 x + b_1 y = c_1
\stopformula

\placeformula\startformula \startalign
  \NC a_1 x + b_1 y \NC = c_1 \NR[+]
  \NC a_2 x + b_2 y \NC = c_2 \NR[+]
\stopalign \stopformula

\placeformula\startformula \startalign
  \NC a_1 x + b_1 y \NC = c_1 \NR[+]
  \NC a_2 x + b_2 y \NC = c_2 \NR
\stopalign \stopformula

\placeformula\startformula \startalign
  \NC a_1 x + b_1 y \NC = c_1 \NR
  \NC a_2 x + b_2 y \NC = c_2 \NR
\stopalign \stopformula
\stopbuffer

\showframe

\subject{normal} {                            \getbuffer}
\subject{left}   {\setupformulas[align=left]  \getbuffer}
\subject{right}  {\setupformulas[align=right] \getbuffer}

\page

\setupformulas[location=left]

\subject{normal} {                            \getbuffer}
\subject{left}   {\setupformulas[align=left]  \getbuffer}
\subject{right}  {\setupformulas[align=right] \getbuffer}

\stoptext
